{% extends 'base.html' %}

{% block title %}Редактирование записи - Планирование{% endblock %}

{% block content %}
{% load static %}


<form id="editPlanningForm" data-success-url="{% url 'planning' %}">
    {% csrf_token %}
    <h2>Редактирование записи планирования</h2>

    <div class="form-group">
        <label>Дата ОДДС:</label>
        <input type="date" name="date" id = "date" value="{{ date }}">
    </div>

    <div class="form-group">
        <label>Проект:</label>
        <select name="project">
            <option value="">Выберите проект</option>
            {% for project in projects %}
            <option value="{{ project.id }}" {% if project.id == record.project %}selected{% endif %}>{{ project.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label>Статья:</label>
        <select name="item" required>
            <option value="">Выберите статью</option>
            {% for item in items %}
            <option value="{{ item.id }}" {% if item.id == record.item %}selected{% endif %}>{{ item.name }}</option>
            {% endfor %}
        </select>
    </div>


    <div class="form-group">
        <label>Сумма:</label>
        <input type="number" name="payment_amount" step="0.01" value="{{ record.payment_amount }}">
    </div>

    <div class="form-group">
        <label>Частота платежа:</label>
        <select name="frequency" id="frequency" required>
            <option value="">Выберите частоту</option>
            {% for value, label in frequency_choices %}
                <option value="{{ value }}" {% if record.frequency == value %}selected{% endif %}>
                    {{ label }}
                </option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label>Комментарий:</label>
        <textarea name="comment" rows="3">{{ record.comment }}</textarea>
    </div>


    <button type="submit">Сохранить изменения</button>
</form>

<script src="{% static 'js/edit_planning.js' %}"></script>
{% endblock %}