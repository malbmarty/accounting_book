{% extends 'base.html' %}

{% block title %}Редактирование записи - Оперативный учет{% endblock %}

{% block content %}
{% load static %}


<form id="editOperAccForm" data-success-url="{% url 'oper_acc' %}">
    {% csrf_token %}
    <h2>Редактирование записи оперативного учета</h2>

    <div class="form-group">
        <label>Дата платежа (ОДДС):</label>
        <input type="date" name="payment_date" id = "paymentDate" value="{{ payment_date }}">
    </div>

    <div class="form-group">
        <label>Дата признания (ОПУ):</label>
        <input type="date" name="recognition_date" id = "recognitionDate" value="{{ recognition_date }}">
    </div>


    <div class="form-group">
        <label>Плательщик ОТКУДА:</label>
        <select name="payer" id="payer" required >
            <option value="">Выберите плательщика</option>
            {% for payer in participants %}
            <option value="{{ payer.id }}" {% if payer.id == record.payer %}selected{% endif %}>{{ payer.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label>Плательщик КУДА:</label>
        <select name="recipient" id="recipient" required >
            <option value="">Выберите получателя</option>
            {% for recipient in participants %}
            <option value="{{ recipient.id }}" {% if recipient.id == record.recipient %}selected{% endif %}>{{ recipient.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label>Статья:</label>
        <select name="item" required>
            <option value="">Выберите статью</option>
            {% for item in items %}
            <option value="{{ item.id }}" {% if item.id == record.item %}selected{% endif %}>{{ item.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label>Платежная система:</label>
        <select name="payment_system" required>
            <option value="">Выберите платежную систему</option>
            {% for payment_system in payment_systems %}
            <option value="{{ payment_system.id }}" {% if payment_system.id == record.payment_system %}selected{% endif %}>{{ payment_system.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label>Проект:</label>
        <select name="project">
            <option value="">Выберите проект</option>
            {% for project in projects %}
            <option value="{{ project.id }}" {% if project.id == record.project %}selected{% endif %}>{{ project.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label>Сумма оплаты:</label>
        <input type="number" name="payment_amount" step="0.01" value="{{ record.payment_amount }}">
    </div>

    <div class="form-group">
        <label>Контрагент:</label>
        <select name="counterparty" id="counterparty" required>
            <option value="">Выберите контрагента</option>
            {% for counterparty in counterparties %}
            <option value="{{ counterparty.id }}" {% if counterparty.id == record.counterparty %}selected{% endif %}>{{ counterparty.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label>Сумма комиссии:</label>
            <input type="number" name="commission_amount" step="0.01" value="{{ record.commission_amount }}">
    </div>

    <div class="form-group">
        <label>Комментарий:</label>
        <textarea name="comment" rows="3">{{ record.comment }}</textarea>
    </div>


    <button type="submit">Сохранить изменения</button>
</form>

<script src="{% static 'js/edit_oper_accounting.js' %}"></script>
{% endblock %}